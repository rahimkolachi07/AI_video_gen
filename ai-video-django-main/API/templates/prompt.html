


<!DOCTYPE html>
<html lang="en">

<head>
  {% load static %}
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <link rel="icon" href="{% static 'images/fevicon.png' %}" type="image/gif" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>Dream Story</title>


  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!-- font awesome style -->
  <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet" />
  <!-- responsive style -->
  <link href="{% static 'css/responsive.css' %}" rel="stylesheet" />

</head>

<body>

  <div class="hero_area">
    <!-- header section strats -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container ">
          <a class="navbar-brand" href="{% static 'index.html' %}">
            <span>Dream Story</span>
          </a>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class=""> </span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav  ml-auto">
              <li class="nav-item ">
                <a class="nav-link" href="http://18.206.163.235:8000/home">Home <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="http://18.206.163.235:8000/about"> About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="http://18.206.163.235:8000/login">Login</a>
              </li>
            </ul>
            <div class="quote_btn-container">
              <form class="form-inline">
                <button class="btn   nav_search-btn" type="submit">
                  <i class="fa fa-search" aria-hidden="true"></i>
                </button>
              </form>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>
                  Call : +01 123455678990
                </span>
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Slider</title>
  <style>
    .slider {
      position: relative;
      max-width: 100%; /* Ensure slider fits within the viewport */
      height: 100vh; /* Set the height of the slider to fill the viewport height */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .image-container {
      position: relative;
    }

    #sliderImage {
      max-width: 100%; /* Set the maximum width of the image */
      max-height: 80vh; /* Set the maximum height of the image */
      width: auto; /* Let the width adjust proportionally */
      height: auto; /* Let the height adjust proportionally */
      display: block;
      object-fit: cover;
      margin: 0 auto;
    }

    .image-text {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(87, 13, 13, 0.3); /* Adjust the opacity value as needed */
    color: white;
    padding: 10px 20px;
    text-align: center;
  }

    button1 {
        margin-top: 30px;
        width: 10%;
        font-size: 18px;
        font-weight: 600;
        border-radius: 5px;
      position: absolute;
      bottom: 20px; /* Position buttons near the bottom of the image */
      background-color: rgba(251, 251, 251, 0.5);
      color: rgb(0, 0, 0);
      padding: 15px 20px; /* Adjust padding for better button appearance */
      cursor: pointer;
      z-index: 1; /* Ensure buttons appear above the image */

      
      
    }

    #prevBtn {
      left: 5%; /* Position previous button to the left */
    }

    #nextBtn {
      right: 5%; /* Position next button to the right */
    }
  </style>
</head>
<body>
  <div class="slider">
    <div class="image-container">
      <img id="sliderImage" src="" alt="Slider Image">
      <div id="imageText" class="image-text"></div>
    </div>
    <button1 id="prevBtn" onclick="changeSlide(-1)">Previous</button1>
    <button1 id="nextBtn" onclick="changeSlide(1)">Next</button1>
    <button1 id="muteBtn" onclick="toggleMute()">Mute</button1>
  </div>

  <script>
    

    let prompt_userId = "{{ user_name_id }}"
    console.log(prompt_userId)

  const images = [
  `https://story21.s3.amazonaws.com/start.gif`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/0.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/1.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/2.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/3.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/4.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/5.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/6.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/7.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/8.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/9.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/10.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/11.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/12.png`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/image/13.png`
  // Add more image URLs as needed
];

const audios = [
  'https://story21.s3.amazonaws.com/start.mp3',
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/0.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/1.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/2.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/3.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/4.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/5.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/6.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/7.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/8.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/9.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/10.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/11.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/12.mp3`,
  `https://story21.s3.amazonaws.com/${prompt_userId}/audio/13.mp3`
  // Add more audio URLs as needed
];

    let currentIndex = 0;
    let audioPlayer;
    let isMuted = false;

    const sliderImage = document.getElementById('sliderImage');
    const imageText = document.getElementById('imageText');
    console.log(prompt_userId)
    if(prompt_userId == "None"){
      // sliderImage.innerHTML = '<h1>No Stories Genearated<h1/>'
      sliderImage.src = "https://static.vecteezy.com/system/resources/previews/005/337/799/original/icon-image-not-found-free-vector.jpg"
    }else{
    sliderImage.src = images[currentIndex];
    }

    function playAudio() {
      if (!isMuted) {
        if (audioPlayer) {
          audioPlayer.pause();
        }
        audioPlayer = new Audio(audios[currentIndex]);
        audioPlayer.play();
      }
    }

    function changeSlide(direction) {
      currentIndex += direction;
      if (currentIndex < 0) {
        currentIndex = images.length - 1;
      } else if (currentIndex >= images.length) {
        currentIndex = 0;
      }
      sliderImage.src = images[currentIndex];
      displayText(); // Call displayText function after changing the image
      if (!isMuted) {
        playAudio();
      } else if (audioPlayer) {
        audioPlayer.pause();
      }
    }

    function toggleMute() {
      isMuted = !isMuted;
      const muteButton = document.getElementById('muteBtn');
      muteButton.textContent = isMuted ? 'Unmute' : 'Mute';
      if (isMuted && audioPlayer) {
        audioPlayer.pause();
      } else if (!isMuted && audioPlayer) {
        playAudio();
      }
    }

    function displayText() {
      // Fetch and parse the CSV file
      const csvURL = `https://story21.s3.amazonaws.com/${prompt_userId}/doc/paragraphs.csv`;
      fetch(csvURL)
        .then(response => response.text())
        .then(data => {
          const rows = data.split('\n'); // Split CSV into rows
          if (rows.length > currentIndex) {
            const text = rows[currentIndex].trim(); // Get the text for the current image
            imageText.textContent = text; // Display the text below the image
          }
        })
        .catch(error => {
          console.error('Error fetching or parsing CSV:', error);
        });
    }
    displayText(); // Call displayText function initially to display text for the first image
  </script>
</body>
</html>


<head>
  <!-- Design by foolishdeveloper.com -->

    <title>Prompt</title>
 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <!--Stylesheet-->
    <style media="screen">
      *,
*:before,
*:after{
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}
body{
    background-color: #080710;
}
.background{
    width: 430px;
    height: 520px;
    position: center;
    transform: translate(-50%,-50%);
    left: 50%;
    top: 50%;
}
.background .shape{
    height: 200px;
    width: 200px;
    position: absolute;
    border-radius: 50%;
}
.shape:first-child{
    background: linear-gradient(
        #1845ad,
        #23a2f6
    );
    left: -80px;
    top: -80px;
}
.shape:last-child{
    background: linear-gradient(
        to right,
        #ff512f,
        #f09819
    );
    right: -30px;
    bottom: -80px;
}
form{
    margin-top: 30rem;
    height: auto;
    width: 100%;
    background-color: rgba(255,255,255,0.13);
    position: absolute;
    transform: translate(-50%,-50%);
    top: 50%;
    left: 50%;
    border-radius: 10px;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255,255,255,0.1);
    box-shadow: 0 0 40px rgba(8,7,16,0.6);
    padding: 50px 35px;
}
form *{
    font-family: 'Poppins',sans-serif;
    color: #ffffff;
    letter-spacing: 0.5px;
    outline: none;
    border: none;
}
form h3{
    font-size: 32px;
    font-weight: 500;
    line-height: 42px;
    text-align: center;
}

label{
    display: block;
    margin-top: 30px;
    font-size: 16px;
    font-weight: 500;
}
input{
    display: block;
    height: 50px;
    width: 100%;
    background-color: rgba(255,255,255,0.07);
    border-radius: 3px;
    padding: 0 10px;
    margin-top: 8px;
    font-size: 14px;
    font-weight: 300;
}
::placeholder{
    color: #e5e5e5;
}
button{
    position: center;
    margin-top: 5%;
    width: 10%;
    margin-right: 22%;
    background-color: #ffffff;
    color: #080710;
    padding: 10% 0;
    font-size: 18px;
    font-weight: 600;
    border-radius: 5px;
    cursor: pointer;
}
.social{
  margin-top: 30px;
  display: flex;
}
.social div{
  background: red;
  width: 150px;
  border-radius: 3px;
  padding: 5px 10px 10px 5px;
  background-color: rgba(255,255,255,0.27);
  color: #eaf0fb;
  text-align: center;
}
.social div:hover{
  background-color: rgba(255,255,255,0.47);
}
.social .fb{
  margin-left: 25px;
}
.social i{
  margin-right: 4px;
}

#id_select_field{
    background-color: rgba(255, 255, 255, 0.07);
}


.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    font-weight: bold;
}

input[type="text"],
select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}
select option {
    color: black;
}


input[type="file"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

.btn-primary {
    background-color: #007bff;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.btn-primary:hover {
    background-color: #0056b3;
}

/* Additional */

#preview-container{
    display: flex;
    margin: 1rem;
}
#preview-image{
    width: 300px;
    height: 300px;
    margin: 10px;
    border-radius: 10px;
}

.loading-screen {
            padding: 10rem;
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 24px;
            text-align: center;
            z-index: 9999;
        }

    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        Loading... Please Wait this may take longer than usual...
    </div>
    <div class="background">
        <div class="shape"></div>
        <div class="shape"></div>
    </div>
    <form method="post" enctype="multipart/form-data" class="upload-form" id="images-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_images">Select images:</label>
            {{ form.images }}
        </div>
        <div id="preview-container" class="form-group">
            <!-- Image previews will be added here dynamically -->
        </div>
        <div class="form-group">
            <label for="id_input_field">Describe Your Story:</label>
            {{ form.input_field }}
        </div>
        <div class="form-group">
            <label for="id_select_field">Select Language:</label>
            {{ form.select_field }}
        </div>
        <button type="submit" class="btn btn-primary">Generate</button>
        <button class="btn btn-primary"><a href="{% url 'stories' %}">See your Stories</a></button>
        <button class="btn btn-primary"><a href="{% url 'logout' %}">Logout</a></button>
    </form>
        
    <script>

function showLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'block';
        }

        // Function to hide loading screen
        function hideLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
        }

        // Add event listener to form submission
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('images-form');
            form.addEventListener('submit', function(event) {
                showLoadingScreen(); // Show loading screen before form submission
            });
        });



        document.getElementById('id_images').addEventListener('change', function() {
            const container = document.getElementById('preview-container');
            container.innerHTML = ''; // Clear previous previews
            for (const file of this.files) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.id = "preview-image"
                    img.alt = 'Image Preview';
                    img.style.maxWidth = '100%';
                    img.style.marginTop = '10px';
                    container.appendChild(img);
                }
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>